{"version":3,"file":"navigation-d7436e97.js","sources":["../../../../node_modules/@nuxt/content/dist/runtime/composables/navigation.mjs"],"sourcesContent":["import { hash } from \"ohash\";\nimport { useRuntimeConfig } from \"#app\";\nimport { encodeQueryParams } from \"../utils/query.mjs\";\nimport { jsonStringify } from \"../utils/json.mjs\";\nimport { addPrerenderPath, shouldUseClientDB, withContentBase } from \"./utils.mjs\";\nimport { queryContent } from \"./query.mjs\";\nimport { useContentPreview } from \"./preview.mjs\";\nexport const fetchContentNavigation = async (queryBuilder) => {\n  const { content } = useRuntimeConfig().public;\n  if (typeof queryBuilder?.params !== \"function\") {\n    queryBuilder = queryContent(queryBuilder);\n  }\n  const params = queryBuilder.params();\n  const apiPath = content.experimental.stripQueryParameters ? withContentBase(`/navigation/${process.dev ? \"_\" : `${hash(params)}.${content.integrity}`}/${encodeQueryParams(params)}.json`) : withContentBase(process.dev ? `/navigation/${hash(params)}` : `/navigation/${hash(params)}.${content.integrity}.json`);\n  if (!process.dev && process.server) {\n    addPrerenderPath(apiPath);\n  }\n  if (shouldUseClientDB()) {\n    const generateNavigation = await import(\"./client-db\").then((m) => m.generateNavigation);\n    return generateNavigation(params);\n  }\n  const data = await $fetch(apiPath, {\n    method: \"GET\",\n    responseType: \"json\",\n    params: content.experimental.stripQueryParameters ? void 0 : {\n      _params: jsonStringify(params),\n      previewToken: useContentPreview().getPreviewToken()\n    }\n  });\n  if (typeof data === \"string\" && data.startsWith(\"<!DOCTYPE html>\")) {\n    throw new Error(\"Not found\");\n  }\n  return data;\n};\n"],"names":[],"mappings":";;;;;;;;;AAOY,MAAC,yBAAyB,OAAO,iBAAiB;AAC5D,QAAM,EAAE,QAAS,IAAoB,iBAAA,EAAE;AACvC,MAAI,QAAO,6CAAc,YAAW,YAAY;AAC9C,mBAAe,aAAa,YAAY;AAAA,EACzC;AACD,QAAM,SAAS,aAAa;AAC5B,QAAM,UAAU,QAAQ,aAAa,uBAAuB,gBAAgB,eAAmC,GAAG,KAAK,MAAM,KAAK,QAAQ,eAAe,kBAAkB,MAAM,QAAQ,IAAI,gBAA8D,eAAe,KAAK,MAAM,KAAK,QAAQ,gBAAgB;AAC9Q;AAClC,qBAAiB,OAAO;AAAA,EACzB;AACD,MAAI,kBAAiB,GAAI;AACvB,UAAM,qBAAqB,MAAM,OAAO,yBAAa,EAAE,KAAK,CAAC,MAAM,EAAE,kBAAkB;AACvF,WAAO,mBAAmB,MAAM;AAAA,EACjC;AACD,QAAM,OAAO,MAAM,OAAO,SAAS;AAAA,IACjC,QAAQ;AAAA,IACR,cAAc;AAAA,IACd,QAAQ,QAAQ,aAAa,uBAAuB,SAAS;AAAA,MAC3D,SAAS,cAAc,MAAM;AAAA,MAC7B,cAAc,kBAAmB,EAAC,gBAAiB;AAAA,IACpD;AAAA,EACL,CAAG;AACD,MAAI,OAAO,SAAS,YAAY,KAAK,WAAW,iBAAiB,GAAG;AAClE,UAAM,IAAI,MAAM,WAAW;AAAA,EAC5B;AACD,SAAO;AACT;","x_google_ignoreList":[0]}